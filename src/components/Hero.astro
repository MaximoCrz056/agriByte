
---
import { Icon } from 'astro-icon/components';
---

<section class="relative pt-24 pb-16 md:pt-40 md:pb-24 overflow-hidden">
  <!-- Background elements -->
  <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10">
    <div class="absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-accent/5 to-transparent"></div>
    <div class="absolute top-1/4 right-0 w-64 h-64 bg-accent/5 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl"></div>
  </div>
  
  <div class="section-container">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      <!-- Text Content -->
      <div class="max-w-2xl mx-auto lg:mx-0 text-center lg:text-left">
        <div class="scroll-reveal" data-delay="100" data-direction="up">
          <div class="inline-block px-3 py-1 mb-5 text-xs font-medium text-accent bg-accent/10 rounded-full">
            Introducing AstroCitrus
          </div>
        </div>
        
        <div class="scroll-reveal" data-delay="200" data-direction="up">
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold leading-tight tracking-tight text-balance mb-6">
            The perfect blend of <span class="text-accent">innovation</span> and <span class="text-accent">simplicity</span>
          </h1>
        </div>
        
        <div class="scroll-reveal" data-delay="300" data-direction="up">
          <p class="text-muted-foreground text-lg md:text-xl max-w-md mx-auto lg:mx-0 mb-8">
            Experience the future of design where every detail has been meticulously crafted for an unparalleled user experience.
          </p>
        </div>
        
        <div class="scroll-reveal" data-delay="400" data-direction="up">
          <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
            <a href="#get-started" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-11 px-8">
              Get Started
              <Icon name="lucide:arrow-right" class="w-4 h-4" />
            </a>
            <a href="#learn-more" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-11 px-8">
              Learn More
            </a>
          </div>
        </div>
        
        <div class="scroll-reveal" data-delay="500" data-direction="up">
          <div class="mt-10 text-sm text-muted-foreground">
            <p>Compatible with iOS, macOS, and iPadOS</p>
          </div>
        </div>
      </div>
      
      <!-- Image/Visual -->
      <div class="scroll-reveal lg:order-last" data-delay="300" data-direction="left">
        <div class="relative mx-auto max-w-lg">
          <div class="absolute inset-0 -z-10 bg-gradient-to-tr from-accent/20 to-primary/10 rounded-[32px] blur-2xl transform rotate-6 scale-105"></div>
          <div class="glass-panel rounded-[32px] p-6 shadow-xl">
            <img
              id="hero-image"
              src="https://images.unsplash.com/photo-1629760946330-5f2db17c5318?q=80&w=1000&auto=format&fit=crop"
              alt="AstroCitrus Product"
              class="w-full h-auto rounded-2xl object-cover image-blur-load shadow-sm"
              loading="lazy"
            />
            <div class="mt-5 flex items-center justify-between">
              <div>
                <h3 class="font-medium">AstroCitrus Pro</h3>
                <p class="text-sm text-muted-foreground">Next generation experience</p>
              </div>
              <div class="glass-panel px-3 py-1 rounded-full text-sm">
                New
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Image load with blur effect
  const img = document.getElementById('hero-image');
  if (img) {
    img.onload = () => {
      img.classList.add('loaded');
    };
    
    // For already cached images
    if (img.complete) {
      img.classList.add('loaded');
    }
  }

  // Scroll reveal animation
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const element = entry.target;
        const delay = element.dataset.delay || 0;
        const direction = element.dataset.direction || 'up';
        
        setTimeout(() => {
          element.classList.add('revealed');
          element.style.opacity = '1';
          element.style.transform = 'translate(0, 0)';
        }, delay);
        
        observer.unobserve(element);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.scroll-reveal').forEach(element => {
    const direction = element.dataset.direction || 'up';
    
    // Set initial styles
    element.style.opacity = '0';
    element.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
    
    if (direction === 'up') {
      element.style.transform = 'translateY(20px)';
    } else if (direction === 'down') {
      element.style.transform = 'translateY(-20px)';
    } else if (direction === 'left') {
      element.style.transform = 'translateX(20px)';
    } else if (direction === 'right') {
      element.style.transform = 'translateX(-20px)';
    }
    
    observer.observe(element);
  });
</script>
