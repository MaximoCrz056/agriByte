
---
import AnimatedLogo from './AnimatedLogo.astro';
---

<header id="navbar" class="fixed top-0 left-0 z-50 w-full transition-all duration-300 py-5">
  <div class="section-container">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2">
        <AnimatedLogo className="h-9 w-9 text-primary" />
        <span class="font-semibold text-lg tracking-tight">agriByte</span>
      </a>

      <!-- Desktop Menu -->
      <nav class="hidden md:flex items-center space-x-8">
        <a href="#features" class="text-muted-foreground underline-anim text-sm font-medium">Features</a>
        <a href="#solutions" class="text-muted-foreground underline-anim text-sm font-medium">Solutions</a>
        <a href="#technology" class="text-muted-foreground underline-anim text-sm font-medium">Technology</a>
        <a href="#contact" class="text-muted-foreground underline-anim text-sm font-medium">Contact</a>
      </nav>

      <!-- CTA Button -->
      <div class="hidden md:flex items-center space-x-4">
        <a href="#demo" class="inline-flex items-center justify-center whitespace-nowrap rounded-full px-5 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9">
          Request Demo
        </a>
        <a href="#contact" class="inline-flex items-center justify-center whitespace-nowrap rounded-full px-5 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9">
          Get Started
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button id="mobile-menu-button" class="md:hidden rounded-md p-2 text-muted-foreground hover:bg-secondary transition">
        <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" x2="20" y1="12" y2="12"></line>
          <line x1="4" x2="20" y1="6" y2="6"></line>
          <line x1="4" x2="20" y1="18" y2="18"></line>
        </svg>
        <svg id="close-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 6 6 18"></path>
          <path d="m6 6 12 12"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="md:hidden fixed inset-x-0 top-[60px] bg-background/95 backdrop-blur-md transition-all duration-300 ease-in-out border-b border-border max-h-0 opacity-0 pointer-events-none">
    <div class="pt-2 pb-4 space-y-1 px-4">
      <a href="#features" class="block py-3 text-muted-foreground hover:text-foreground transition">Features</a>
      <a href="#solutions" class="block py-3 text-muted-foreground hover:text-foreground transition">Solutions</a>
      <a href="#technology" class="block py-3 text-muted-foreground hover:text-foreground transition">Technology</a>
      <a href="#contact" class="block py-3 text-muted-foreground hover:text-foreground transition">Contact</a>
      <div class="flex flex-col space-y-2 pt-3">
        <a href="#demo" class="inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 w-full">
          Request Demo
        </a>
        <a href="#contact" class="inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 w-full">
          Get Started
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  // Handle mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  const navbar = document.getElementById('navbar');
  
  let mobileMenuOpen = false;
  
  if (mobileMenuButton && mobileMenu && menuIcon && closeIcon) {
    mobileMenuButton.addEventListener('click', () => {
      mobileMenuOpen = !mobileMenuOpen;
      
      if (mobileMenuOpen) {
        mobileMenu.classList.remove('max-h-0', 'opacity-0', 'pointer-events-none');
        mobileMenu.classList.add('max-h-[400px]', 'opacity-100');
        menuIcon.classList.add('hidden');
        closeIcon.classList.remove('hidden');
      } else {
        mobileMenu.classList.add('max-h-0', 'opacity-0', 'pointer-events-none');
        mobileMenu.classList.remove('max-h-[400px]', 'opacity-100');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
      }
    });
  }
  
  // Handle scroll effect
  window.addEventListener('scroll', () => {
    if (navbar) {
      if (window.scrollY > 20) {
        navbar.classList.add('backdrop-blur-md', 'bg-background/80', 'border-b', 'border-border', 'shadow-sm', 'py-3');
        navbar.classList.remove('py-5');
      } else {
        navbar.classList.remove('backdrop-blur-md', 'bg-background/80', 'border-b', 'border-border', 'shadow-sm', 'py-3');
        navbar.classList.add('py-5');
      }
    }
  });
</script>
